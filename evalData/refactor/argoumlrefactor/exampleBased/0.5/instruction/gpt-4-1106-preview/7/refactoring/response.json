
{
    "refactorings": {
        "src/argouml-app/src/org/argouml/ui/JasonsBigTheme.java": [
            {
                "fromLine": 52,
                "toLine": 78,
                "oldContent": "private final ColorUIResource primary1 = new ColorUIResource(102, 102, 153);\n    private final ColorUIResource primary2 = new ColorUIResource(153, 153, 204);\n    private final ColorUIResource primary3 = new ColorUIResource(204, 204, 255);\n\n    private final ColorUIResource secondary1 =\n\tnew ColorUIResource(102, 102, 102);\n    private final ColorUIResource secondary2 =\n\tnew ColorUIResource(153, 153, 153);\n    private final ColorUIResource secondary3 =\n\tnew ColorUIResource(204, 204, 204);",
                "newContent": "private ThemeColors themeColors = new ThemeColors(102, 153, 204);"
            },
            {
                "fromLine": 80,
                "toLine": 88,
                "oldContent": "private final FontUIResource controlFont =\n\tnew FontUIResource(\"SansSerif\", Font.PLAIN, 14);\n    private final FontUIResource systemFont =\n\tnew FontUIResource(\"Dialog\", Font.PLAIN, 14);\n    private final FontUIResource windowTitleFont =\n\tnew FontUIResource(\"SansSerif\", Font.BOLD, 14);\n    private final FontUIResource userFont =\n\tnew FontUIResource(\"SansSerif\", Font.PLAIN, 14);\n    private final FontUIResource smallFont =\n\tnew FontUIResource(\"Dialog\", Font.PLAIN, 12);",
                "newContent": "private ThemeFonts themeFonts = new ThemeFonts(new Font(\"SansSerif\", Font.PLAIN, 14), new Font(\"Dialog\", Font.PLAIN, 14), new Font(\"SansSerif\", Font.BOLD, 14), new Font(\"SansSerif\", Font.PLAIN, 14), new Font(\"Dialog\", Font.PLAIN, 12));"
            }
        ],
        "src/argouml-app/src/org/argouml/ui/JasonsHugeTheme.java": [
            {
                "fromLine": 52,
                "toLine": 78,
                "oldContent": "private final ColorUIResource primary1 = new ColorUIResource(102, 102, 153);\n    private final ColorUIResource primary2 = new ColorUIResource(153, 153, 204);\n    private final ColorUIResource primary3 = new ColorUIResource(204, 204, 255);\n\n    private final ColorUIResource secondary1 =\n\tnew ColorUIResource(102, 102, 102);\n    private final ColorUIResource secondary2 =\n\tnew ColorUIResource(153, 153, 153);\n    private final ColorUIResource secondary3 =\n\tnew ColorUIResource(204, 204, 204);",
                "newContent": "private ThemeColors themeColors = new ThemeColors(102, 153, 204);"
            },
            {
                "fromLine": 80,
                "toLine": 88,
                "oldContent": "private final FontUIResource controlFont =\n\tnew FontUIResource(\"SansSerif\", Font.BOLD, 16);\n    private final FontUIResource systemFont =\n\tnew FontUIResource(\"Dialog\", Font.PLAIN, 16);\n    private final FontUIResource windowTitleFont =\n\tnew FontUIResource(\"SansSerif\", Font.BOLD, 16);\n    private final FontUIResource userFont =\n\tnew FontUIResource(\"SansSerif\", Font.PLAIN, 16);\n    private final FontUIResource smallFont =\n\tnew FontUIResource(\"Dialog\", Font.PLAIN, 14);",
                "newContent": "private ThemeFonts themeFonts = new ThemeFonts(new Font(\"SansSerif\", Font.BOLD, 16), new Font(\"Dialog\", Font.PLAIN, 16), new Font(\"SansSerif\", Font.BOLD, 16), new Font(\"SansSerif\", Font.PLAIN, 16), new Font(\"Dialog\", Font.PLAIN, 14));"
            }
        ],
        "src/argouml-core-diagrams-sequence2/src/org/argouml/sequence2/diagram/FigLifeLine.java": [
            {
                "fromLine": 44,
                "toLine": 44,
                "oldContent": "    private List<FigActivation> activations;",
                "newContent": "    private ActivationList activations;"
            },
            {
                "fromLine": 45,
                "toLine": 45,
                "oldContent": "    private List<FigActivation> stackedActivations;",
                "newContent": "    private ActivationList stackedActivations;"
            },
            {
                "fromLine": 62,
                "toLine": 63,
                "oldContent": "        activations = new LinkedList<FigActivation>();\n        stackedActivations = new LinkedList<FigActivation>();",
                "newContent": "        activations = new ActivationList();\n        stackedActivations = new ActivationList();"
            },
            {
                "fromLine": 85,
                "toLine": 85,
                "oldContent": "        addActivations(activations);",
                "newContent": "        activations.addToFig(this);"
            },
            {
                "fromLine": 86,
                "toLine": 86,
                "oldContent": "        addActivations(stackedActivations);",
                "newContent": "        stackedActivations.addToFig(this);"
            },
            {
                "fromLine": 99,
                "toLine": 106,
                "oldContent": "    private void addActivations(\n            final List<FigActivation> activationFigs) {\n        for (final FigActivation figAct : activationFigs) {\n            figAct.setFillColor(getFillColor());\n            addFig(figAct);\n        }\n    }",
                "newContent": ""
            },
            {
                "fromLine": 108,
                "toLine": 143,
                "oldContent": "    private List<FigActivation> createStandardActivations(\n                final List<FigMessage> figMessages) {        \n        \n        final List<FigActivation> newActivations =\n            new LinkedList<FigActivation>();\n        \n        // Check here if there are no incoming call actions\n        // if not then create an activation at the top of the lifeline\n        FigActivation currentActivation = null;\n        if (!hasIncomingCallActionFirst(figMessages)) {\n            currentActivation = createActivationFig(\n                    getOwner(),\n                    lineFig.getX(),\n                    lineFig.getY(), \n                    lineFig.getWidth(), \n                    lineFig.getHeight(),\n                    getSettings(),\n                    null);\n        }\n        \n        // This counts the number of repeated call/returns that take place\n        // after the first activation. This shouldn't be required once\n        // we handle stacked activations better and once issue 5692 and 5693\n        // are sorted.\n        int activationsCount = 0;\n        //\n        \n        for (FigMessage figMessage : figMessages) {\n            int ySender = 0;\n            \n            if (!figMessage.isSelfMessage()) {\n                if (isIncoming(figMessage)) {\n                    if (currentActivation == null) {\n                        if (figMessage.isSynchCallMessage()) {\n                            // if we are the dest and is a call action, create the \n                            // activation, but don't add it until the height is set.\n                            ySender = figMessage.getFinalY();\n                            currentActivation = createActivationFig(\n                                    getOwner(), \n                                    lineFig.getX(), \n                                    ySender, \n                                    0, \n                                    0,\n                                    getSettings(),\n                                    figMessage);\n                            activationsCount++;\n                        } else if (figMessage.isCreateMessage()) {\n                            // if we are the destination of a create action,\n                            // create the entire activation\n                            currentActivation = createActivationFig(\n                                    getOwner(),\n                                    lineFig.getX(),\n                                    lineFig.getY(),\n                                    0,\n                                    0,\n                                    getSettings(),\n                                    figMessage);\n                            activationsCount++;\n                        }\n                    } else {\n                        if (figMessage.isSynchCallMessage()\n                                && isSameClassifierRoles(\n                                        currentActivation.getActivatingMessage(),\n                                        figMessage)) {\n                            activationsCount++;\n                        } else if (figMessage.isDeleteMessage()) {\n                            // if we are the target of a destroy action\n                            // the figlifeline ends here and we add the activation\n                            ySender = figMessage.getFinalY();\n                            currentActivation.setHeight(\n                                    ySender - currentActivation.getY());\n                            currentActivation.setDestroy(true);\n                            lineFig.setHeight(ySender - getY());\n                            newActivations.add(currentActivation);\n                            currentActivation = null;\n                        }\n                    }\n                }\n                \n                if (isOutgoing(figMessage) && currentActivation != null\n                    && currentActivation.isActivatorEnd(figMessage)\n                            && --activationsCount == 0) {\n                        // if we are the source of a return action\n                        // the activation ends here.\n                        ySender = figMessage.getStartY();\n                        currentActivation.setHeight(\n                                ySender - currentActivation.getY());\n                        newActivations.add(currentActivation);\n                        currentActivation = null;\n                }\n            }\n        }\n        \n        // If we have a currentAct object that means have reached the end\n        // of the lifeline with a call or a create not returned.\n        // Add the activation to the list after setting its height to end\n        // at the end of the lifeline.\n        if (currentActivation != null) {\n            currentActivation.setHeight(\n                    getHeight() - (currentActivation.getY() - getY()));\n            newActivations.add(currentActivation);\n        }\n        \n        return newActivations;\n    }",
                "newContent": "    private ActivationList createStandardActivations(\n                final List<FigMessage> figMessages) {        \n        return ActivationList.createStandardActivations(this, figMessages);\n    }"
            },
            {
                "fromLine": 147,
                "toLine": 160,
                "oldContent": "    private boolean isSameClassifierRoles(\n            final FigMessage mess1,\n            final FigMessage mess2) {\n        return mess1 != null\n                && mess1.getDestFigNode() == mess2.getDestFigNode()\n                && mess1.getSourceFigNode() == mess2.getSourceFigNode();\n    }\n    \n    /**\n     * Return true if the given message fig is pointing in to this lifeline.\n     * @param messageFig\n     * @return true if the message is incoming\n     */\n    private boolean isIncoming(FigMessage messageFig) {\n        return (messageFig.getDestFigNode().getOwner() == getOwner());\n    }",
                "newContent": ""
            },
            {
                "fromLine": 164,
                "toLine": 168,
                "oldContent": "    private boolean isOutgoing(FigMessage messageFig) {\n        return (messageFig.getSourceFigNode().getOwner() == getOwner());\n    }",
                "newContent": ""
            },
            {
                "fromLine": 170,
                "toLine": 179,
                "oldContent": "    private FigActivation createActivationFig(\n            final Object owner, \n            final int x, \n            final int y, \n            final int w, \n            final int h,\n            final DiagramSettings settings,\n            final FigMessage messageFig) {\n        return new FigActivation(\n                owner,\n                new Rectangle(x, y, w, h),\n                settings,\n                messageFig);\n    }",
                "newContent": ""
            },
            {
                "fromLine": 181,
                "toLine": 211,
                "oldContent": "    private List<FigActivation> createStackedActivations(\n            final List<FigMessage> figMessages) {\n        \n        final List<FigActivation> newActivations =\n            new LinkedList<FigActivation>();\n        \n        FigActivation currentAct = null;\n        \n        for (FigMessage figMessage : figMessages) {\n            int ySender = 0;\n            // if we are the dest and is a call action, create the \n            // activation, but don't add it until the height is set.\n            if (figMessage.isSelfMessage()) {\n                if (figMessage.isSynchCallMessage()) {\n                    ySender = figMessage.getFinalY();\n                    currentAct = new FigActivation(figMessage.getOwner(),\n                            new Rectangle(lineFig.getX()\n                                    + FigActivation.DEFAULT_WIDTH / 2, ySender,\n                                    0, 0), getSettings(), figMessage, false);\n                } else if (currentAct != null\n                        && figMessage.isReplyMessage()) {\n                    ySender = figMessage.getStartY();\n                    currentAct.setHeight(ySender - currentAct.getY());\n                    newActivations.add(currentAct);\n                    currentAct = null;\n                }\n            }\n        }\n        return newActivations;\n    }",
                "newContent": "    private ActivationList createStackedActivations(\n            final List<FigMessage> figMessages) {\n        return ActivationList.createStackedActivations(this, figMessages);\n    }"
            },
            {
                "fromLine": 213,
                "toLine": 219,
                "oldContent": "    private boolean hasIncomingCallActionFirst(\n                final List<FigMessage> figMessages) {\n        final FigClassifierRole cr =\n            (FigClassifierRole) getGroup();\n        if (figMessages.isEmpty()) {\n            return false;\n        }",
                "newContent": "    boolean hasIncomingCallActionFirst(\n                final List<FigMessage> figMessages) {\n        return ActivationList.hasIncomingCallActionFirst(this, figMessages);\n    }"
            },
            {
                "fromLine": 221,
                "toLine": 230,
                "oldContent": "        FigMessage figMessage = figMessages.get(0);\n        if (cr.equals(figMessage.getDestFigNode())\n                && !cr.equals(figMessage.getSourceFigNode())\n                && figMessage.isSynchCallMessage()) {\n            return true;\n        }\n        return false;\n    }",
                "newContent": ""
            },
            {
                "fromLine": 232,
                "toLine": 238,
                "oldContent": "    private void clearActivations() {\n        for (FigActivation oldActivation : activations) {\n            removeFig(oldActivation);    \n        }\n        for (FigActivation oldActivation : stackedActivations) {\n            removeFig(oldActivation);    \n        }",
                "newContent": "    void clearActivations() {\n        activations.clearFromFig(this);\n        stackedActivations.clearFromFig(this);"
            },
            {
                "fromLine": 240,
                "toLine": 242,
                "oldContent": "        activations.clear();\n        stackedActivations.clear();\n    }",
                "newContent": ""
            }
        ]
    },
    "extractedClasses": {
        "src/argouml-app/src/org/argouml/ui/ThemeColors.java": "package org.argouml.ui;\n\nimport javax.swing.plaf.ColorUIResource;\n\npublic class ThemeColors {\n\n    private final ColorUIResource primary1;\n    private final ColorUIResource primary2;\n    private final ColorUIResource primary3;\n    private final ColorUIResource secondary1;\n    private final ColorUIResource secondary2;\n    private final ColorUIResource secondary3;\n\n    public ThemeColors(int primaryStart, int primaryMid, int primaryEnd) {\n        primary1 = new ColorUIResource(primaryStart, primaryStart, primaryEnd);\n        primary2 = new ColorUIResource(primaryMid, primaryMid, primaryEnd);\n        primary3 = new ColorUIResource(primaryEnd, primaryEnd, primaryEnd);\n\n        secondary1 = new ColorUIResource(primaryStart, primaryStart, primaryStart);\n        secondary2 = new ColorUIResource(primaryMid, primaryMid, primaryMid);\n        secondary3 = new ColorUIResource(primaryEnd, primaryEnd, primaryEnd);\n    }\n\n    public ColorUIResource getPrimary1() {\n        return primary1;\n    }\n\n    public ColorUIResource getPrimary2() {\n        return primary2;\n    }\n\n    public ColorUIResource getPrimary3() {\n        return primary3;\n    }\n\n    public ColorUIResource getSecondary1() {\n        return secondary1;\n    }\n\n    public ColorUIResource getSecondary2() {\n        return secondary2;\n    }\n\n    public ColorUIResource getSecondary3() {\n        return secondary3;\n    }\n}",
        "src/argouml-app/src/org/argouml/ui/ThemeFonts.java": "package org.argouml.ui;\n\nimport java.awt.Font;\nimport javax.swing.plaf.FontUIResource;\n\npublic class ThemeFonts {\n\n    private final FontUIResource controlFont;\n    private final FontUIResource systemFont;\n    private final FontUIResource windowTitleFont;\n    private final FontUIResource userFont;\n    private final FontUIResource smallFont;\n\n    public ThemeFonts(Font control, Font system, Font windowTitle, Font user, Font small) {\n        controlFont = new FontUIResource(control);\n        systemFont = new FontUIResource(system);\n        windowTitleFont = new FontUIResource(windowTitle);\n        userFont = new FontUIResource(user);\n        smallFont = new FontUIResource(small);\n    }\n\n    public FontUIResource getControlTextFont() {\n        return controlFont;\n    }\n\n    public FontUIResource getSystemTextFont() {\n        return systemFont;\n    }\n\n    public FontUIResource getUserTextFont() {\n        return userFont;\n    }\n\n    public FontUIResource getMenuTextFont() {\n        return controlFont;\n    }\n\n    public FontUIResource getSubTextFont() {\n        return smallFont;\n    }\n\n    public
{
    "refactorings": {
        "src/argouml-core-diagrams-sequence2/src/org/argouml/sequence2/diagram/FigLifeLine.java": [
            {
                "fromLine": 240,
                "toLine": 242,
                "oldContent": "        activations.clear();\n        stackedActivations.clear();\n    }",
                "newContent": "        activations.clearActivations();\n        stackedActivations.clearActivations();\n    }"
            },
            {
                "fromLine": 244,
                "toLine": 246,
                "oldContent": "    @Override\n    public void setFilled(boolean filled) {\n        // we do nothing. No call to the parent",
                "newContent": "    @Override\n    public void setFilled(boolean filled) {\n        // The filled property is not applicable to lifelines."
            },
            {
                "fromLine": 248,
                "toLine": 263,
                "oldContent": "    protected synchronized void setBoundsImpl(int x, int y, int w, int h) {\n        final Rectangle oldBounds = getBounds();\n        \n        rectFig.setBounds(x, y, w, h);\n        lineFig.setBounds(x + w / 2, y, w, h);\n        \n        final int yDiff = oldBounds.y - y;\n    \n        // we don't recalculate activations, just move them\n        for (FigActivation act : activations) {\n            // TODO: why do we need to remove then add the Fig?\n            removeFig(act);\n            act.setLocation(\n                    lineFig.getX() - FigActivation.DEFAULT_WIDTH / 2,\n                    act.getY() - yDiff);\n            if (activations.size() == 1 \n                    && act.getHeight() == oldBounds.height) {\n                act.setHeight(getHeight());\n            }\n            addFig(act);\n        }\n        damage();\n        _x = x;\n        _y = y;\n        _w = w;\n        _h = h;\n        firePropChange(\"bounds\", oldBounds, getBounds());\n    }",
                "newContent": "    protected synchronized void setBoundsImpl(int x, int y, int w, int h) {\n        final Rectangle oldBounds = getBounds();\n        \n        rectFig.setBounds(x, y, w, h);\n        lineFig.setBounds(x + w / 2, y, w, h);\n        \n        final int yDiff = oldBounds.y - y;\n    \n        // Adjust the positions of the activations\n        activations.adjustActivations(yDiff);\n        stackedActivations.adjustActivations(yDiff);\n        \n        damage();\n        _x = x;\n        _y = y;\n        _w = w;\n        _h = h;\n        firePropChange(\"bounds\", oldBounds, getBounds());\n    }"
            },
            {
                "fromLine": 265,
                "toLine": 265,
                "oldContent": "    public void setLineWidth(int w) {",
                "newContent": "    public void setLineWidth(int width) {"
            },
            {
                "fromLine": 266,
                "toLine": 266,
                "oldContent": "        lineFig.setLineWidth(w);",
                "newContent": "        lineFig.setLineWidth(width);"
            }
        ]
    },
    "extractedClasses": {
        "src/argouml-core-diagrams-sequence2/src/org/argouml/sequence2/diagram/ActivationList.java": "package org.argouml.sequence2.diagram;\n\nimport java.util.LinkedList;\nimport java.util.List;\n\npublic class ActivationList {\n\n    private List<FigActivation> activations;\n\n    public ActivationList() {\n        activations = new LinkedList<FigActivation>();\n    }\n\n    public void clearActivations() {\n        activations.clear();\n    }\n\n    public void adjustActivations(int yDiff) {\n        // Adjust the positions of the activations\n        for (FigActivation act : activations) {\n            act.setLocation(act.getX(), act.getY() - yDiff);\n            if (activations.size() == 1 && act.getHeight() == oldBounds.height) {\n                act.setHeight(act.getParent().getHeight());\n            }\n        }\n    }\n\n    // Other methods to manipulate activations\n}\n"
    }
}