{
    "refactorings": {
        "store/src/main/java/org/apache/rocketmq/store/stats/BrokerStatsManager.java": [
            {
                "fromLine": 72,
                "toLine": 72,
                "oldContent": "    private ScheduledExecutorService commercialExecutor;",
                "newContent": "    private ScheduledExecutorService commercialExecutor;\n    private static final String SEP = \"@\";"
            },
            {
                "fromLine": 111,
                "toLine": 111,
                "oldContent": "            String statsKey = buildStatsKey(queueId, topic, group);",
                "newContent": "            String statsKey = buildStatsKey(queueId, topic, group);"
            },
            {
                "fromLine": 187,
                "toLine": 188,
                "oldContent": "        strBuilder.append(topic).append(\"@\").append(group);\n        return strBuilder.toString();",
                "newContent": "        strBuilder.append(topic).append(SEP).append(group);\n        return strBuilder.toString();"
            },
            {
                "fromLine": 196,
                "toLine": 196,
                "oldContent": "        strBuilder.append(topic).append(\"@\").append(queueId);",
                "newContent": "        strBuilder.append(topic).append(SEP).append(queueId);"
            },
            {
                "fromLine": 204,
                "toLine": 204,
                "oldContent": "        strBuilder.append(topic).append(\"@\").append(queueId).append(\"@\").append(group);",
                "newContent": "        strBuilder.append(topic).append(SEP).append(queueId).append(SEP).append(group);"
            },
            {
                "fromLine": 212,
                "toLine": 212,
                "oldContent": "        strBuilder.append(queueId).append(\"@\").append(topic).append(\"@\").append(group);",
                "newContent": "        strBuilder.append(queueId).append(SEP).append(topic).append(SEP).append(group);"
            },
            {
                "fromLine": 241,
                "toLine": 241,
                "oldContent": "        this.statsTable.get(Stats.TOPIC_PUT_NUMS).delValue(topic);",
                "newContent": "        this.statsTable.get(Stats.TOPIC_PUT_NUMS).delValue(topic);"
            },
            {
                "fromLine": 1130,
                "toLine": 1131,
                "oldContent": "        strBuilder.append(\"@\");\n        strBuilder.append(topic);",
                "newContent": "        strBuilder.append(SEP);\n        strBuilder.append(topic);"
            },
            {
                "fromLine": 1137,
                "toLine": 1137,
                "oldContent": "        strBuilder.append(owner);",
                "newContent": "        strBuilder.append(owner);"
            },
            {
                "fromLine": 1143,
                "toLine": 1143,
                "oldContent": "        strBuilder.append(\"@\");",
                "newContent": "        strBuilder.append(SEP);"
            },
            {
                "fromLine": 1148,
                "toLine": 1148,
                "oldContent": "        strBuilder.append(\"@\");",
                "newContent": "        strBuilder.append(SEP);"
            },
            {
                "fromLine": 1154,
                "toLine": 1154,
                "oldContent": "        strBuilder.append(\"@\");",
                "newContent": "        strBuilder.append(SEP);"
            },
            {
                "fromLine": 1160,
                "toLine": 1160,
                "oldContent": "        final String sep = \"|\";",
                "newContent": "        final String sep = \"|\";"
            },
            {
                "fromLine": 1168,
                "toLine": 1168,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1173,
                "toLine": 1173,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1178,
                "toLine": 1178,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1183,
                "toLine": 1183,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1188,
                "toLine": 1188,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1194,
                "toLine": 1194,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1200,
                "toLine": 1200,
                "oldContent": "        final String sep = \"|\";",
                "newContent": "        final String sep = \"|\";"
            },
            {
                "fromLine": 1207,
                "toLine": 1207,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1213,
                "toLine": 1213,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1218,
                "toLine": 1218,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1223,
                "toLine": 1223,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1228,
                "toLine": 1228,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1234,
                "toLine": 1234,
                "oldContent": "        strBuilder.append(sep);",
                "newContent": "        strBuilder.append(sep);"
            },
            {
                "fromLine": 1239,
                "toLine": 1239,
                "oldContent": "        final String sep = \"\\\\|\";",
                "newContent": "        final String sep = \"\\\\|\";"
            }
        ],
        "store/src/test/java/org/apache/rocketmq/store/stats/BrokerStatsManagerTest.java": [
            {
                "fromLine": 83,
                "toLine": 83,
                "oldContent": "        final String statsKey = brokerStatsManager.buildStatsKey(brokerStatsManager.buildStatsKey(TOPIC, String.valueOf(QUEUE_ID)), GROUP_NAME);",
                "newContent": "        final String statsKey = brokerStatsManager.buildStatsKey(brokerStatsManager.buildStatsKey(TOPIC, String.valueOf(QUEUE_ID)), GROUP_NAME);"
            },
            {
                "fromLine": 83,
                "toLine": 83,
                "oldContent": "        final String statsKey = brokerStatsManager.buildStatsKey(brokerStatsManager.buildStatsKey(TOPIC, String.valueOf(QUEUE_ID)), GROUP_NAME);",
                "newContent": "        final String statsKey = brokerStatsManager.buildStatsKey(brokerStatsManager.buildStatsKey(TOPIC, String.valueOf(QUEUE_ID)), GROUP_NAME);"
            },
            {
                "fromLine": 92,
                "toLine": 92,
                "oldContent": "    private String buildStatsKey(String topic, String group) {",
                "newContent": "    private static final String SEP = \"@\";\n\n    private String buildStatsKey(String topic, String group) {"
            },
            {
                "fromLine": 96,
                "toLine": 96,
                "oldContent": "        strBuilder.append(topic).append(\"@\").append(group);",
                "newContent": "        strBuilder.append(topic).append(SEP).append(group);"
            },
            {
                "fromLine": 103,
                "toLine": 103,
                "oldContent": "        strBuilder.append(topic).append(\"@\").append(String.valueOf(queueId));",
                "newContent": "        strBuilder.append(topic).append(SEP).append(String.valueOf(queueId));"
            },
            {
                "fromLine": 111,
                "toLine": 111,
                "oldContent": "        strBuilder.append(topic).append(\"@\").append(String.valueOf(queueId)).append(\"@\").append(group);",
                "newContent": "        strBuilder.append(topic).append(SEP).append(String.valueOf(queueId)).append(SEP).append(group);"
            },
            {
                "fromLine": 119,
                "toLine": 119,
                "oldContent": "        strBuilder.append(String.valueOf(queueId)).append(\"@\").append(topic).append(\"@\").append(group);",
                "newContent": "        strBuilder.append(String.valueOf(queueId)).append(SEP).append(topic).append(SEP).append(group);"
            }
        ],
        "broker/src/test/java/org/apache/rocketmq/broker/processor/EndTransactionProcessorTest.java": [
            {
                "fromLine": 95,
                "toLine": 96,
                "oldContent": "                    String statsKey = String.format(\"%s@%s\", topic, group);\n                    BrokerStatsData bsd = admin.viewBrokerStatsData(masterAddr, Stats.GROUP_GET_NUMS, statsKey);",
                "newContent": "                    String statsKey = topic + SEP + group;\n                    BrokerStatsData bsd = admin.viewBrokerStatsData(masterAddr, Stats.GROUP_GET_NUMS, statsKey);"
            },
            {
                "fromLine": 52,
                "toLine": 54,
                "oldContent": "    private static SocketAddress bornHost;\n    private static SocketAddress storeHost;\n    private DefaultMessageStore messageStore;",
                "newContent": "    private static SocketAddress bornHost;\n    private static SocketAddress storeHost;\n    private DefaultMessageStore messageStore;\n    private static final String SEP = \"@\";"
            }
        ],
        "broker/src/test/java/org/apache/rocketmq/broker/schedule/ScheduleMessageServiceTest.java": [
            {
                "fromLine": 55,
                "toLine": 55,
                "oldContent": "    private static SocketAddress storeHost;",
                "newContent": "    private static SocketAddress storeHost;\n    private static final String SEP = \"@\";"
            },
            {
                "fromLine": 261,
                "toLine": 261,
                "oldContent": "        String statsKey = String.format(\"%d@%s@%s\", 1, TOPIC, GROUP_NAME);",
                "newContent": "        String statsKey = 1 + SEP + TOPIC + SEP + GROUP_NAME;"
            },
            {
                "fromLine": 291,
                "toLine": 291,
                "oldContent": "        int queueId = ScheduleMessageService.queueId2DelayLevel(delayLevel);",
                "newContent": "        int queueId = ScheduleMessageService.queueId2DelayLevel(delayLevel);"
            }
        ],
        "tools/src/main/java/org/apache/rocketmq/tools/command/export/ExportMetricsCommand.java": [
            {
                "fromLine": 199,
                "toLine": 199,
                "oldContent": "                            String statsKey = String.format(\"%s@%s\", topic, group);",
                "newContent": "                            String statsKey = topic + SEP + group;"
            },
            {
                "fromLine": 201,
                "toLine": 201,
                "oldContent": "                            BrokerStatsData bsd = admin.viewBrokerStatsData(masterAddr, Stats.GROUP_GET_NUMS, statsKey);",
                "newContent": "                            BrokerStatsData bsd = admin.viewBrokerStatsData(masterAddr, Stats.GROUP_GET_NUMS, statsKey);"
            },
            {
                "fromLine": 147,
                "toLine": 147,
                "oldContent": "        Set<String> clientInfoSet = new HashSet<>();",
                "newContent": "        Set<String> clientInfoSet = new HashSet<>();\n        final String SEP = \"@\";"
            }
        ],
        "tools/src/main/java/org/apache/rocketmq/tools/command/stats/StatsAllSubCommand.java": [
            {
                "fromLine": 104,
                "toLine": 104,
                "oldContent": "                            String statsKey = String.format(\"%s@%s\", topic, group);",
                "newContent": "                            String statsKey = topic + SEP + group;"
            },
            {
                "fromLine": 106,
                "toLine": 106,
                "oldContent": "                            BrokerStatsData bsd = admin.viewBrokerStatsData(masterAddr, Stats.GROUP_GET_NUMS, statsKey);",
                "newContent": "                            BrokerStatsData bsd = admin.viewBrokerStatsData(masterAddr, Stats.GROUP_GET_NUMS, statsKey);"
            }
        ]
    },
    "extractedClasses": {}
}
