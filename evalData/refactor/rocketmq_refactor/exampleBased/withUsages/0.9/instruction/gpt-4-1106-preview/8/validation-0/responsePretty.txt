"{
    "refactorings": {
        "store/src/main/java/org/apache/rocketmq/store/stats/BrokerStatsManager.java": [
            {
                "fromLine": 292,
                "toLine": 307,
                "oldContent": "public void incQueuePutNums(final String topic, final Integer queueId, final int size) {\r\n        if (enableQueueStat) {\r\n            this.statsTable.get(Stats.QUEUE_PUT_SIZE).addValue(buildStatsKey(topic, queueId), size, 1);\r\n        }\r\n    }\r\n\r\n    public void incQueueGetNums(final String group, final String topic, final Integer queueId, final int incValue) {\r\n        if (enableQueueStat) {\r\n            final String statsKey = buildStatsKey(topic, queueId, group);\r\n            this.statsTable.get(Stats.QUEUE_GET_NUMS).addValue(statsKey, incValue, 1);\r\n        }\r\n    }",
                "newContent": "public void incQueuePutNums(final StatsKey statsKey, final int size) {\r\n        if (enableQueueStat) {\r\n            this.statsTable.get(Stats.QUEUE_PUT_SIZE).addValue(statsKey.getStatsKey(), size, 1);\r\n        }\r\n    }\r\n\r\n    public void incQueueGetNums(final StatsKey statsKey, final int incValue) {\r\n        if (enableQueueStat) {\r\n            this.statsTable.get(Stats.QUEUE_GET_NUMS).addValue(statsKey.getStatsKey(), incValue, 1);\r\n        }\r\n    }"
            },
            {
                "fromLine": 310,
                "toLine": 312,
                "oldContent": "public void incQueueGetSize(final String group, final String topic, final Integer queueId, final int incValue) {\r\n        if (enableQueueStat) {\r\n            final String statsKey = buildStatsKey(topic, queueId, group);",
                "newContent": "public void incQueueGetSize(final StatsKey statsKey, final int incValue) {\r\n        if (enableQueueStat) {"
            },
            {
                "fromLine": 448,
                "toLine": 448,
                "oldContent": "this.statsTable.get(Stats.QUEUE_GET_SIZE).addValue(statsKey, incValue, 1);",
                "newContent": "this.statsTable.get(Stats.QUEUE_GET_SIZE).addValue(statsKey.getStatsKey(), incValue, 1);"
            },
            {
                "fromLine": 568,
                "toLine": 576,
                "oldContent": "public String buildStatsKey(String topic, String group) {\r\n        StringBuilder strBuilder;\r\n        if (topic != null && group != null) {\r\n            strBuilder = new StringBuilder(topic.length() + group.length() + 1);\r\n        } else {\r\n            strBuilder = new StringBuilder();\r\n        }\r\n        strBuilder.append(topic).append('@').append(group);\r\n        return strBuilder.toString();",
                "newContent": ""
            },
            {
                "fromLine": 578,
                "toLine": 585,
                "oldContent": "public String buildStatsKey(String topic, int queueId) {\r\n        StringBuilder strBuilder;\r\n        if (topic != null) {\r\n            strBuilder = new StringBuilder(topic.length() + 5);\r\n        } else {\r\n            strBuilder = new StringBuilder();\r\n        }\r\n        strBuilder.append(topic).append('@').append(queueId);",
                "newContent": ""
            },
            {
                "fromLine": 587,
                "toLine": 595,
                "oldContent": "return strBuilder.toString();\r\n    }\r\n\r\n    public String buildStatsKey(String topic, int queueId, String group) {\r\n        StringBuilder strBuilder;\r\n        if (topic != null && group != null) {\r\n            strBuilder = new StringBuilder(topic.length() + group.length() + 6);\r\n        } else {\r\n            strBuilder = new StringBuilder();",
                "newContent": ""
            },
            {
                "fromLine": 597,
                "toLine": 599,
                "oldContent": "strBuilder.append(topic).append('@').append(queueId).append('@').append(group);\r\n        return strBuilder.toString();",
                "newContent": ""
            },
            {
                "fromLine": 601,
                "toLine": 609,
                "oldContent": "public String buildStatsKey(int queueId, String topic, String group) {\r\n        StringBuilder strBuilder;\r\n        if (topic != null && group != null) {\r\n            strBuilder = new StringBuilder(topic.length() + group.length() + 6);\r\n        } else {\r\n            strBuilder = new StringBuilder();\r\n        }\r\n        strBuilder.append(queueId).append('@').append(topic).append('@').append(group);\r\n        return strBuilder.toString();",
                "newContent": ""
            }
        ]
    },
    "extractedClasses": {
        "store/src/main/java/org/apache/rocketmq/store/stats/StatsKey.java": "package org.apache.rocketmq.store.stats;\r\n\r\npublic class StatsKey {\r\n    private final String topic;\r\n    private final int queueId;\r\n    private final String group;\r\n\r\n    public StatsKey(String topic, int queueId, String group) {\r\n        this.topic = topic;\r\n        this.queueId = queueId;\r\n        this.group = group;\r\n    }\r\n\r\n    public String getStatsKey() {\r\n        StringBuilder strBuilder = new StringBuilder();\r\n        if (topic != null) {\r\n            strBuilder.append(topic).append('@');\r\n        }\r\n        if (queueId > -1) {\r\n            strBuilder.append(queueId);\r\n        }\r\n        if (group != null) {\r\n            if (strBuilder.length() > 0)\r\n                strBuilder.append('@');\r\n            strBuilder.append(group);\r\n        }\r\n        return strBuilder.toString();\r\n    }\r\n}"
    }
}"