"{
    "refactorings": {
        "store/src/main/java/org/apache/rocketmq/store/stats/BrokerStatsManager.java": [
            {
                "fromLine": 134,
                "toLine": 134,
                "oldContent": "    private BrokerConfig brokerConfig;",
                "newContent": ""
            },
            {
                "fromLine": 157,
                "toLine": 201,
                "oldContent": "    public BrokerStatsManager(BrokerConfig brokerConfig) {\n        this.brokerConfig = brokerConfig;\n        this.enableQueueStat = brokerConfig.isEnableDetailStat();\n        initScheduleService();\n        this.clusterName = brokerConfig.getBrokerClusterName();\n        init();\n    }\n\n    public BrokerStatsManager(String clusterName, boolean enableQueueStat) {\n        this.clusterName = clusterName;\n        this.enableQueueStat = enableQueueStat;\n        initScheduleService();\n        init();\n    }",
                "newContent": "    public BrokerStatsManager(ConfigSet configSet) {\n        this.enableQueueStat = configSet.isEnableQueueStat();\n        initScheduleService(configSet.getBrokerConfig());\n        this.clusterName = configSet.getClusterName();\n        init();\n    }"
            },
            {
                "fromLine": 255,
                "toLine": 255,
                "oldContent": "        final BrokerConfig brokerConfig = this.brokerConfig;",
                "newContent": "        final BrokerConfig brokerConfig = configSet.getBrokerConfig();"
            },
            {
                "fromLine": 718,
                "toLine": 718,
                "oldContent": "        initScheduleService();",
                "newContent": "        this.scheduledExecutorService =\n            ThreadUtils.newSingleThreadScheduledExecutor(new ThreadFactoryImpl(\"BrokerStatsThread\", true));\n        this.commercialExecutor =\n            ThreadUtils.newSingleThreadScheduledExecutor(new ThreadFactoryImpl(\"CommercialStatsThread\", true));\n        this.accountExecutor =\n            ThreadUtils.newSingleThreadScheduledExecutor(new ThreadFactoryImpl(\"AccountStatsThread\", true));"
            }
        ],
        "store/src/test/java/org/apache/rocketmq/store/stats/BrokerStatsManagerTest.java": [
            {
                "fromLine": 87,
                "toLine": 87,
                "oldContent": "        brokerStatsManager = new BrokerStatsManager(CLUSTER_NAME, true);",
                "newContent": "        brokerStatsManager = new BrokerStatsManager(new ConfigSet(CLUSTER_NAME, true));"
            }
        ],
        "broker/src/test/java/org/apache/rocketmq/broker/processor/EndTransactionProcessorTest.java": [
            {
                "fromLine": 57,
                "toLine": 57,
                "oldContent": "        brokerController = new BrokerController(new BrokerConfig(), new NettyServerConfig(), new NettyClientConfig(),\n            new MessageStoreConfig(), null);",
                "newContent": "        brokerController = new BrokerController(new ConfigSet(new BrokerConfig(), new NettyServerConfig(), new NettyClientConfig(),\n            new MessageStoreConfig()), null);"
            }
        ],
        "broker/src/test/java/org/apache/rocketmq/broker/schedule/ScheduleMessageServiceTest.java": [
            {
                "fromLine": 75,
                "toLine": 75,
                "oldContent": "        brokerController = Mockito.mock(BrokerController.class);",
                "newContent": "        brokerController = Mockito.mock(BrokerController.class, Mockito.withSettings().useConstructor(new ConfigSet(new BrokerConfig(), new NettyServerConfig(), new NettyClientConfig(), new MessageStoreConfig())).defaultAnswer(Mockito.CALLS_REAL_METHODS));"
            }
        ],
        "tools/src/main/java/org/apache/rocketmq/tools/command/export/ExportMetricsCommand.java": [
            {
                "fromLine": 244,
                "toLine": 244,
                "oldContent": "    private Map<String, Object> getRuntimeVersion(DefaultMQAdminExt defaultMQAdminExt,\n        SubscriptionGroupWrapper subscriptionGroupWrapper) {",
                "newContent": "    private Map<String, Object> getRuntimeVersion(DefaultMQAdminExt defaultMQAdminExt,\n        SubscriptionGroupWrapper subscriptionGroupWrapper, ConfigSet configSet) {"
            },
            {
                "fromLine": 261,
                "toLine": 261,
                "oldContent": "    private Map<String, Object> getRuntimeEnv(KVTable kvTable, Properties properties) {",
                "newContent": "    private Map<String, Object> getRuntimeEnv(KVTable kvTable, Properties properties, ConfigSet configSet) {"
            },
            {
                "fromLine": 270,
                "toLine": 270,
                "oldContent": "    private Map<String, Object> getRuntimeQuota(KVTable kvTable, DefaultMQAdminExt defaultMQAdminExt, String brokerAddr,",
                "newContent": "    private Map<String, Object> getRuntimeQuota(KVTable kvTable, DefaultMQAdminExt defaultMQAdminExt, String brokerAddr, ConfigSet configSet,"
            }
        ],
        "tools/src/main/java/org/apache/rocketmq/tools/command/stats/StatsAllSubCommand.java": [
            {
                "fromLine": 72,
                "toLine": 72,
                "oldContent": "    public static void printTopicDetail(final DefaultMQAdminExt admin, final String topic, final boolean activeTopic)",
                "newContent": "    public static void printTopicDetail(final DefaultMQAdminExt admin, final String topic, final boolean activeTopic, final ConfigSet configSet)"
            }
        ]
    }
}"