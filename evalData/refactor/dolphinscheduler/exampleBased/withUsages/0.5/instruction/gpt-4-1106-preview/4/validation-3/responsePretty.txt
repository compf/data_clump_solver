"{
    "refactorings": {
        "dolphinscheduler-dao/src/main/java/org/apache/dolphinscheduler/dao/entity/TaskInstance.java": [
            {
                "fromLine": 1,
                "toLine": 112,
                "oldContent": "public class TaskInstanceInit {\n\n    private String host;\n    private Date startTime;\n    private String executePath;\n\n    // getters and setters\n}",
                "newContent": ""
            },
            {
                "fromLine": 109,
                "toLine": 112,
                "oldContent": "    public void init(TaskInstanceInit taskInstanceInit) {\n        this.host = taskInstanceInit.getHost();\n        this.startTime = taskInstanceInit.getStartTime();\n        this.executePath = taskInstanceInit.getExecutePath();\n    }",
                "newContent": "    public void init(String host, Date startTime, String executePath) {\n        this.host = host;\n        this.startTime = startTime;\n        this.executePath = executePath;\n    }"
            }
        ],
        "dolphinscheduler-dao/src/main/java/org/apache/dolphinscheduler/dao/mapper/WorkflowInstanceMapper.java": [
            {
                "fromLine": 1,
                "toLine": 102,
                "oldContent": "public class WorkflowInstanceQuery {\n\n    private Long workflowDefinitionCode;\n    private String searchVal;\n    private String executorName;\n    private int[] statusArray;\n    private String host;\n    private Date startTime;\n    private Date endTime;\n\n    // getters and setters\n}\n\npublic class FailoverStateQuery {\n\n    private String host;\n    private int[] stateArray;\n\n    // getters and setters\n}\n\npublic class WorkflowInstanceUpdateState {\n\n    private Integer workflowInstanceId;\n    private WorkflowExecutionStatus originState;\n    private WorkflowExecutionStatus targetState;\n\n    // getters and setters\n}\n\npublic class TenantCodeUpdate {\n\n    private String originTenantCode;\n    private String destTenantCode;\n\n    // getters and setters\n}\n\npublic class WorkerGroupNameUpdate {\n\n    private String originWorkerGroupName;\n    private String destWorkerGroupName;\n\n    // getters and setters\n}\n\npublic class WorkflowInstanceCountQuery {\n\n    private Date startTime;\n    private Date endTime;\n    private Collection<Long> projectCodes;\n\n    // getters and setters\n}\n\npublic class WorkflowInstanceTopQuery {\n\n    private int size;\n    private Date startTime;\n    private Date endTime;\n    private WorkflowExecutionStatus status;\n    private long projectCode;\n\n    // getters and setters\n}",
                "newContent": ""
            },
            {
                "fromLine": 88,
                "toLine": 102,
                "oldContent": "IPage<WorkflowInstance> queryWorkflowInstanceListPaging(Page<WorkflowInstance> page,\n                                                            @Param(\"projectCode\") Long projectCode,\n                                                            @Param(\"workflowDefinitionCode\") Long workflowDefinitionCode,\n                                                            @Param(\"searchVal\") String searchVal,\n                                                            @Param(\"executorName\") String executorName,\n                                                            @Param(\"states\") int[] statusArray,\n                                                            @Param(\"host\") String host,\n                                                            @Param(\"startTime\") Date startTime,\n                                                            @Param(\"endTime\") Date endTime);",
                "newContent": "IPage<WorkflowInstance> queryWorkflowInstanceListPaging(Page<WorkflowInstance> page,\n                                                            @Param(\"projectCode\") Long projectCode,\n                                                            WorkflowInstanceQuery workflowInstanceQuery);"
            },
            {
                "fromLine": 104,
                "toLine": 105,
                "oldContent": "    int setFailoverByHostAndStateArray(@Param(\"host\") String host,\n                                       @Param(\"states\") int[] stateArray);",
                "newContent": "    int setFailoverByHostAndStateArray(FailoverStateQuery failoverStateQuery);"
            },
            {
                "fromLine": 107,
                "toLine": 111,
                "oldContent": "    int updateWorkflowInstanceState(\n                                    @Param(\"workflowInstanceId\") Integer workflowInstanceId,\n                                    @Param(\"originState\") WorkflowExecutionStatus originState,\n                                    @Param(\"targetState\") WorkflowExecutionStatus targetState);",
                "newContent": "    int updateWorkflowInstanceState(WorkflowInstanceUpdateState workflowInstanceUpdateState,\n                                    WorkflowExecutionStatus originState,\n                                    WorkflowExecutionStatus targetState);"
            },
            {
                "fromLine": 113,
                "toLine": 114,
                "oldContent": "    int updateWorkflowInstanceByTenantCode(@Param(\"originTenantCode\") String originTenantCode,\n                                           @Param(\"destTenantCode\") String destTenantCode);",
                "newContent": "    int updateWorkflowInstanceByTenantCode(TenantCodeUpdate tenantCodeUpdate);"
            },
            {
                "fromLine": 116,
                "toLine": 117,
                "oldContent": "    int updateWorkflowInstanceByWorkerGroupName(@Param(\"originWorkerGroupName\") String originWorkerGroupName,\n                                                @Param(\"destWorkerGroupName\") String destWorkerGroupName);",
                "newContent": "    int updateWorkflowInstanceByWorkerGroupName(WorkerGroupNameUpdate workerGroupNameUpdate);"
            },
            {
                "fromLine": 119,
                "toLine": 124,
                "oldContent": "    List<WorkflowInstanceStatusCountDto> countWorkflowInstanceStateByProjectCodes(\n                                                                                  @Param(\"startTime\") Date startTime,\n                                                                                  @Param(\"endTime\") Date endTime,\n                                                                                  @Param(\"projectCodes\") Collection<Long> projectCodes);",
                "newContent": "    List<WorkflowInstanceStatusCountDto> countWorkflowInstanceStateByProjectCodes(WorkflowInstanceCountQuery workflowInstanceCountQuery);"
            },
            {
                "fromLine": 126,
                "toLine": 131,
                "oldContent": "    WorkflowInstance queryLastSchedulerWorkflow(@Param(\"workflowDefinitionCode\") Long workflowDefinitionCode,\n                                                @Param(\"taskDefinitionCode\") Long taskDefinitionCode,\n                                                @Param(\"startTime\") Date startTime,\n                                                @Param(\"endTime\") Date endTime,\n                                                @Param(\"testFlag\") int testFlag);",
                "newContent": "    WorkflowInstance queryLastSchedulerWorkflow(WorkflowInstanceQuery workflowInstanceQuery,\n                                                Long taskDefinitionCode,\n                                                Date startTime,\n                                                Date endTime,\n                                                int testFlag);"
            },
            {
                "fromLine": 133,
                "toLine": 138,
                "oldContent": "    WorkflowInstance queryLastManualWorkflow(@Param(\"workflowDefinitionCode\") Long workflowDefinitionCode,\n                                             @Param(\"taskCode\") Long taskCode,\n                                             @Param(\"startTime\") Date startTime,\n                                             @Param(\"endTime\") Date endTime,\n                                             @Param(\"testFlag\") int testFlag);",
                "newContent": "    WorkflowInstance queryLastManualWorkflow(WorkflowInstanceQuery workflowInstanceQuery,\n                                             Long taskCode,\n                                             Date startTime,\n                                             Date endTime,\n                                             int testFlag);"
            },
            {
                "fromLine": 140,
                "toLine": 140,
                "oldContent": "    WorkflowInstance queryFirstScheduleWorkflowInstance(@Param(\"workflowDefinitionCode\") Long workflowDefinitionCode);",
                "newContent": "    WorkflowInstance queryFirstScheduleWorkflowInstance(Long workflowDefinitionCode);"
            },
            {
                "fromLine": 142,
                "toLine": 142,
                "oldContent": "    WorkflowInstance queryFirstStartWorkflowInstance(@Param(\"workflowDefinitionCode\") Long workflowDefinitionCode);",
                "newContent": "    WorkflowInstance queryFirstStartWorkflowInstance(Long workflowDefinitionCode);"
            },
            {
                "fromLine": 144,
                "toLine": 149,
                "oldContent": "    List<WorkflowInstance> queryTopNWorkflowInstance(@Param(\"size\") int size,\n                                                     @Param(\"startTime\") Date startTime,\n                                                     @Param(\"endTime\") Date endTime,\n                                                     @Param(\"status\") WorkflowExecutionStatus status,\n                                                     @Param(\"projectCode\") long projectCode);",
                "newContent": "    List<WorkflowInstance> queryTopNWorkflowInstance(WorkflowInstanceTopQuery workflowInstanceTopQuery);"
            },
            {
                "fromLine": 151,
                "toLine": 153,
                "oldContent": "    List<WorkflowInstance> queryByWorkflowDefinitionCodeAndStatus(@Param(\"workflowDefinitionCode\") Long workflowDefinitionCode,\n                                                                  @Param(\"states\") int[] states);",
                "newContent": "    List<WorkflowInstance> queryByWorkflowDefinitionCodeAndStatus(WorkflowInstanceQuery workflowInstanceQuery,\n                                                                  int[] states);"
            },
            {
                "fromLine": 155,
                "toLine": 157,
                "oldContent": "    List<WorkflowInstance> queryByWorkflowCodeVersionStatus(@Param(\"workflowDefinitionCode\") long workflowDefinitionCode,\n                                                            @Param(\"workflowDefinitionVersion\") int workflowDefinitionVersion,\n                                                            @Param(\"states\") int[] states);",
                "newContent": "    List<WorkflowInstance> queryByWorkflowCodeVersionStatus(WorkflowInstanceQuery workflowInstanceQuery,\n                                                            int workflowDefinitionVersion,\n                                                            int[] states);"
            },
            {
                "fromLine": 159,
                "toLine": 166,
                "oldContent": "    IPage<WorkflowInstance> queryWorkflowInstanceListV2Paging(Page<WorkflowInstance> page,\n                                                              @Param(\"projectCode\") Long projectCode,\n                                                              @Param(\"workflowDefinitionCode\") Long workflowDefinitionCode,\n                                                              @Param(\"name\") String name,\n                                                              @Param(\"startTime\") String startTime,\n                                                              @Param(\"endTime\") String endTime,\n                                                              @Param(\"state\") Integer state,\n                                                              @Param(\"host\") String host);",
                "newContent": "    IPage<WorkflowInstance> queryWorkflowInstanceListV2Paging(Page<WorkflowInstance> page,\n                                                              @Param(\"projectCode\") Long projectCode,\n                                                              WorkflowInstanceQuery workflowInstanceQuery);"
            },
            {
                "fromLine": 168,
                "toLine": 174,
                "oldContent": "    List<ExecuteStatusCount> countInstanceStateV2(\n                                                  @Param(\"startTime\") Date startTime,\n                                                  @Param(\"endTime\") Date endTime,\n                                                  @Param(\"projectCode\") Long projectCode,\n                                                  @Param(\"workflowCode\") Long workflowCode,\n                                                  @Param(\"model\") Integer model,\n                                                  @Param(\"projectIds\") Set<Integer> projectIds);",
                "newContent": "    List<ExecuteStatusCount> countInstanceStateV2(WorkflowInstanceCountQuery workflowInstanceCountQuery);"
            }
        ]
    },
    "extractedClasses": {
        "dolphinscheduler-dao/src/main/java/org/apache/dolphinscheduler/dao/mapper/WorkflowInstanceMapper.java": "public class WorkflowInstanceQuery {\n\n    private Long workflowDefinitionCode;\n    private String searchVal;\n    private String executorName;\n    private int[] statusArray;\n    private String host;\n    private Date startTime;\n    private Date endTime;\n\n    // getters and setters\n}\n\npublic class FailoverStateQuery {\n\n    private String host;\n    private int[] stateArray;\n\n    // getters and setters\n}\n\npublic class WorkflowInstanceUpdateState {\n\n    private Integer workflowInstanceId;\n    private WorkflowExecutionStatus originState;\n    private WorkflowExecutionStatus targetState;\n\n    // getters and setters\n}\n\npublic class TenantCodeUpdate {\n\n    private String originTenantCode;\n    private String destTenantCode;\n\n    // getters and setters\n}\n\npublic class WorkerGroupNameUpdate {\n\n    private String originWorkerGroupName;\n    private String destWorkerGroupName;\n\n    // getters and setters\n}\n\npublic class WorkflowInstanceCountQuery {\n\n    private Date startTime;\n    private Date endTime;\n    private Collection<Long> projectCodes;\n\n    // getters and setters\n}\n\npublic class WorkflowInstanceTopQuery {\n\n    private int size;\n    private Date startTime;\n    private Date endTime;\n    private WorkflowExecutionStatus status;\n    private long projectCode;\n\n    // getters and setters\n}",
        "dolphinscheduler-dao/src/main/java/org/apache/dolphinscheduler/dao/entity/TaskInstance.java": "public class TaskInstanceInit {\n\n    private String host;\n    private Date startTime;\n    private String executePath;\n\n    // getters and setters\n}"
    }
}"